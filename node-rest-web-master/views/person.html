<!doctype html>
<html ng-app="demo">
	<head>
		<title>Person Test</title>
		<script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.6.5/angular.min.js"></script>
    	<script src = "javascripts/person.js"></script>
    	<style>
			table, th, td {
   		 		border: 1px solid black;
			}
		</style>
	</head>

	<body> 
		<div ng-controller = "search">
			<h2><a href="/"> Return </a></h2>
			<br>
			<h2>Person Search / Relational Search</h2>
			<form novalidate class = "simple-form">
	    		<label> Search Person by Id: <input type = "text" ng-model="id"> </label>
	    		<input type = "submit" value = "search" ng-click = "submit(id)">
	    		<input type = "submit" value = "find addresses" ng-click = "findAddr(id)">
			</form>
			<br>
			<form novalidate class = "simple-form">
	    		<label> Search by Last Name: <input type = "text" ng-model="lastName"> </label>
	    		<input type = "submit" value = "search" ng-click = "searchByName(lastName)">
			</form>
			<p> Send request to api: {{ myUri }} </p>
			<table style="width:50%">
			  	<tr>
    				<th>Id</th>
    				<th>FirstName</th> 
    				<th>LastName</th>
    				<th>E-mail</th>
  				</tr>
  				<tr ng-repeat = "p in persons">
					<td align="center">{{ p.Id }}</td>
					<td align="center">{{ p.FirstName }}</td>
					<td align="center">{{ p.LastName }}</td>
					<td align="center">{{ p.Email }}</td>
				</tr>
			</table>
			<br>
			<p> The person is in following addresses:</p>
			<table style="width:50%">
			  	<tr>
    				<th align="center">Id</th>
    				<th align="center">Street</th> 
    				<th align="center">City</th>
    				<th align="center">State</th>
    				<th align="center">Zip</th>
  				</tr>
  				<tr ng-repeat = "a in addresses">
					<td align="center">{{ a.Id }}</td>
					<td align="center">{{ a.Street }}</td>
					<td align="center">{{ a.City }}</td>
					<td align="center">{{ a.State }}</td>
					<td align="center">{{ a.Zip }}</td>
				</tr>
			</table>
		</div>
		<br>

		<h2>Person Delete</h2>
		<div ng-controller = "delete">
			<form novalidate class = "simple-form">
	    		<label> Delete by Id: <input type = "text" ng-model="id"> </label>
	    		<input type = "submit" value = "delete" ng-click = "delete(id)">
			</form>
			<p> Send request to api: {{ myUri }} </p>
			<p> Response: {{ responseCode }} </p>
			<p> SQL returns: {{ affected }} </p>
		</div>
		<br>
		<h2>Person Add</h2>
		<div ng-controller = "add"> 
			<form novalidate class = "simple-form">
				<div>
	    			<label> Id: <input type = "text" ng-model="person.Id"> </label>
	    		</div>
	    		<div>
	    			<label> First Name: <input type = "text" ng-model="person.FirstName"> </label>
	    		</div>
	    		<div>
	    			<label> Last Name: <input type = "text" ng-model="person.LastName"> </label>
	    		</div>
	    		<div>
	    			<label> E-mail: <input type = "text" ng-model="person.Email"> </label>
	    		</div>
	    		<div>
	    			<input type = "submit" value = "add" ng-click = "add(person)">
	    			<input type = "submit" value = "show all" ng-click = "show()">
	    		</div>
			</form>
			<p> Submitted: {{ data }} </p>
			<p> Response: {{ responseCode }} </p>
			<p> SQL returns: {{ affected }} </p>
			<p> Now we have: </p>
			<table style="width:50%">
			  	<tr>
    				<th>Id</th>
    				<th>FirstName</th> 
    				<th>LastName</th>
    				<th>E-mail</th>
  				</tr>
  				<tr ng-repeat = "p in persons">
					<td align="center">{{ p.Id }}</td>
					<td align="center">{{ p.FirstName }}</td>
					<td align="center">{{ p.LastName }}</td>
					<td align="center">{{ p.Email }}</td>
				</tr>
			</table>
		</div>
	</body>

</html>